# Statement of Work (SOW): Dvorfs Repository Manager

## 1. Введение (Introduction)

### 1.1. Цель проекта (Project Goal)
Создание полнофункционального, высокопроизводительного и надежного open-source менеджера репозиториев, являющегося аналогом Sonatype Nexus Repository.

### 1.2. Описание проблемы (Problem Statement)
Командам разработки требуется централизованное, гибкое и универсальное решение для управления бинарными артефактами, пакетами и зависимостями. Существующие решения могут быть дорогостоящими, избыточными или не соответствовать специфическим требованиям проекта.

### 1.3. Целевая аудитория (Target Audience)
- Разработчики и DevOps-инженеры.
- Компании, ищущие on-premise решение для управления артефактами.
- Open-source сообщество.

## 2. Объем работ (Scope of Work)

### 2.1. Поддерживаемые форматы (Supported Formats)
- **Package Managers:** NPM, Pypi, Maven
- **Linux Packages:** RPM, APT
- **Containerization:** Docker
- **Generic:** RAW

### 2.2. Функциональные требования (Functional Requirements)

#### 2.2.1. Управление репозиториями
- **Типы репозиториев:**
  - `hosted`: Локальное хранилище для собственных артефактов.
  - `proxy`: Кэширующий прокси для удаленных репозиториев (e.g., Maven Central, npmjs).
  - `group`: Агрегация нескольких репозиториев под одним URL.
- **Операции:** Создание, редактирование, удаление и конфигурация репозиториев через UI и API.

#### 2.2.2. Управление артефактами
- **Операции:** Загрузка, скачивание, удаление артефактов.
- **Поиск:** Индексация и поиск артефактов по метаданным.
- **Очистка:** Настройка политик для автоматического удаления старых или неиспользуемых артефактов.

#### 2.2.3. Управление пользователями и безопасностью
- **Аутентификация:** Локальная база пользователей, интеграция с LDAP/AD (в будущих версиях).
- **Авторизация:** Гибкая ролевая модель доступа (RBAC) для контроля доступа к репозиториям и API.

#### 2.2.4. API
- **REST API:** Полноценный API для автоматизации всех аспектов управления системой.
- **Документация:** Интерактивная документация API (e.g., Swagger/OpenAPI).

## 3. Архитектура и технологии

### 3.1. Архитектурный подход
- **Микросервисная архитектура:** Обеспечивает гибкость, масштабируемость и независимое развертывание компонентов.

### 3.2. Технологический стек

| Компонент | Технология |
|---|---|
| **Backend** | Kotlin, Ktor, Gradle |
| **Frontend** | TypeScript, Next.js, Tailwind CSS |
| **База данных** | PostgreSQL |
| **Контейнеризация** | Docker, Docker Compose |

## 4. Нефункциональные требования (Non-Functional Requirements)

- **Производительность:** Быстрая отдача артефактов, низкое время отклика API (<200ms на 95-м перцентиле).
- **Надежность:** Высокая доступность (High Availability) с возможностью кластеризации.
- **Масштабируемость:** Горизонтальное масштабирование сервисов для обработки высоких нагрузок.
- **Безопасность:** Защита от распространенных уязвимостей (OWASP Top 10), шифрование данных.

## 5. План проекта и этапы (Project Plan & Milestones)

### Этап 1: MVP (Minimum Viable Product) - ~3-4 недели
- **Цель:** Создать базовый функционал для хранения и получения артефактов.
- **Функционал:**
  - Аутентификация пользователей.
  - Создание `hosted` репозиториев для `RAW` и `Maven`.
  - Загрузка/скачивание артефактов.
  - Базовый UI и `docker-compose` для развертывания.
- **Критерии готовности:** Пользователь может развернуть систему, создать репозиторий, загрузить и скачать артефакт.

### Этап 2: Расширение функциональности - ~4-6 недель
- **Цель:** Добавить проксирование и группировку, расширить поддержку форматов.
- **Функционал:**
  - Реализация `proxy` и `group` репозиториев.
  - Поддержка `NPM` и `Docker`.
  - Развитие системы прав доступа (RBAC).
- **Критерии готовности:** Пользователь может использовать систему как прокси для публичных репозиториев.

### Этап 3: Стабилизация и Production-готовность - ~6-8 недель
- **Цель:** Подготовить систему к использованию в production.
- **Функционал:**
  - Поддержка всех заявленных форматов.
  - Оптимизация производительности, мониторинг, логирование.
  - Политики очистки артефактов.
  - Подробная документация.
- **Критерии готовности:** Система стабильна, документирована и готова к промышленной эксплуатации.
